(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{TdFn:function(t,e,i){"use strict";i.r(e),i.d(e,"SubjectsModule",function(){return z});var c=i("tyNb"),a=i("ofXK"),n=i("UKGz"),o=i("+0xr"),r=i("Dh3D"),s=i("M9IT"),b=i("0IaG"),l=i("3Pt+"),d=i("fXoL"),u=i("kmnG"),m=i("NFeN"),h=i("qFsG"),p=i("bTqV");function f(t,e){1&t&&(d.Ub(0,"mat-error"),d.Fc(1,"\u0426\u0435 \u043f\u043e\u043b\u0435 \u0454 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0438\u043c"),d.Tb())}function g(t,e){1&t&&(d.Ub(0,"mat-error"),d.Fc(1,"\u0426\u0435 \u043f\u043e\u043b\u0435 \u0454 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0438\u043c"),d.Tb())}let j=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.subjectForm=new l.h({subject_name:new l.f(this.data?this.data.subject_name:"",[l.w.required]),subject_description:new l.f(this.data?this.data.subject_description:"",[l.w.required]),subject_id:new l.f(this.data?this.data.subject_id:"")}),this.hasError=(t,e)=>this.subjectForm.controls[t].hasError(e)}ngOnInit(){}onSubmit(){this.subjectForm.valid&&this.subjectForm.touched&&this.subjectForm.dirty&&this.dialogRef.close(this.subjectForm.value)}onClose(){this.dialogRef.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(b.g),d.Ob(b.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-modal"]],decls:20,vars:6,consts:[[1,"example-form",3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"modal-title"],["mat-dialog-content",""],[1,"modal-field"],[1,"modal-entity-input"],["matInput","","formControlName","subject_name"],[4,"ngIf"],["appearance","outline"],["placeholder","\u041e\u043f\u0438\u0441 \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0443","formControlName","subject_description","matInput","","rows","5","cols","40"],["mat-dialog-actions","",1,"modal-field"],["mat-button","","type","reset",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","click"]],template:function(t,e){1&t&&(d.Ub(0,"form",0),d.cc("ngSubmit",function(){return e.onSubmit()}),d.Ub(1,"h1",1),d.Fc(2),d.Tb(),d.Ub(3,"div",2),d.Ub(4,"mat-form-field",3),d.Ub(5,"mat-label",4),d.Ub(6,"mat-icon"),d.Fc(7,"collections_bookmark"),d.Tb(),d.Fc(8," \u041d\u0430\u0437\u0432\u0430 \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0443"),d.Tb(),d.Pb(9,"input",5),d.Dc(10,f,2,0,"mat-error",6),d.Tb(),d.Tb(),d.Ub(11,"div",2),d.Ub(12,"mat-form-field",7),d.Pb(13,"textarea",8),d.Dc(14,g,2,0,"mat-error",6),d.Tb(),d.Tb(),d.Ub(15,"div",9),d.Ub(16,"button",10),d.cc("click",function(){return e.onClose()}),d.Fc(17,"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"),d.Tb(),d.Ub(18,"button",11),d.cc("click",function(){return e.onSubmit()}),d.Fc(19),d.Tb(),d.Tb(),d.Tb()),2&t&&(d.lc("formGroup",e.subjectForm),d.Cb(2),d.Hc(" ",e.data?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u0439"," \u043f\u0440\u0435\u0434\u043c\u0435\u0442 "),d.Cb(8),d.lc("ngIf",e.hasError("subject_name","required")),d.Cb(4),d.lc("ngIf",e.hasError("subject_description","required")),d.Cb(4),d.lc("disabled",!e.subjectForm.valid),d.Cb(1),d.Hc(" ",e.data?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438"," "))},directives:[l.x,l.q,l.i,b.h,b.e,u.c,u.g,m.a,h.b,l.c,l.p,l.g,a.k,b.c,p.b,u.b],styles:["[_nghost-%COMP%]{box-sizing:border-box}mat-form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;justify-content:space-between;align-content:space-between}button[_ngcontent-%COMP%]{width:45%;text-align:center;margin:auto}.modal-title[_ngcontent-%COMP%]{font-weight:500;text-align:center}.modal-field[_ngcontent-%COMP%]{width:100%;justify-content:center}.modal-entity-input[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})();var T=i("L0I5"),S=i("tk/3"),C=i("z6cu"),w=i("JIr8");const y=i("AytR").a.BASEURL+"Subject";let _=(()=>{class t{constructor(t){this.http=t,this.create=t=>this.http.post(y+"/insertData",t,this.generateHeaders()).pipe(Object(w.a)(this.handleError)),this.update=(t,e)=>this.http.post(`${y}/update/${t}`,e,this.generateHeaders()).pipe(Object(w.a)(this.handleError)),this.delete=t=>this.http.delete(`${y}/del/${t}`).pipe(Object(w.a)(this.handleError)),this.generateHeaders=()=>({headers:new S.c({"Content-Type":"application/json"})})}getData(t){return this.http.get(`${y}/getRecords/${t}`).pipe(Object(w.a)(this.handleError))}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`Backend returned code ${t.status}, body was: `+t.error),Object(C.a)("Something bad happened; please try again later.")}}return t.\u0275fac=function(e){return new(e||t)(d.Yb(S.a))},t.\u0275prov=d.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var U=i("JK/P"),v=i("Qu3c");function F(t,e){1&t&&(d.Ub(0,"th",22),d.Fc(1,"\u2116"),d.Tb())}function O(t,e){if(1&t&&(d.Ub(0,"td",23),d.Fc(1),d.Tb()),2&t){const t=e.$implicit,i=d.gc();d.Cb(1),d.Hc(" ",i.dataSource.data.indexOf(t)+1," ")}}function k(t,e){1&t&&(d.Ub(0,"th",22),d.Fc(1,"\u041d\u0430\u0437\u0432\u0430"),d.Tb())}function D(t,e){if(1&t&&(d.Ub(0,"td",23),d.Fc(1),d.Tb()),2&t){const t=e.$implicit;d.Cb(1),d.Hc(" ",t.subject_name," ")}}function P(t,e){1&t&&(d.Ub(0,"th",22),d.Fc(1,"\u041e\u043f\u0438\u0441"),d.Tb())}function M(t,e){if(1&t&&(d.Ub(0,"td",23),d.Fc(1),d.Tb()),2&t){const t=e.$implicit;d.Cb(1),d.Hc(" ",t.subject_description," ")}}function x(t,e){1&t&&(d.Ub(0,"th",24),d.Fc(1,"\u041e\u043f\u0446\u0456\u0457"),d.Tb())}function I(t,e){if(1&t){const t=d.Vb();d.Ub(0,"td",23),d.Ub(1,"button",25),d.cc("click",function(){d.vc(t);const i=e.$implicit;return d.gc().redirectToTimetable(i)}),d.Ub(2,"mat-icon",26),d.Fc(3,"date_range"),d.Tb(),d.Tb(),d.Ub(4,"button",27),d.cc("click",function(){d.vc(t);const i=e.$implicit;return d.gc().redirectToTests(i.subject_id)}),d.Ub(5,"mat-icon",26),d.Fc(6,"fact_check"),d.Tb(),d.Tb(),d.Ub(7,"button",28),d.cc("click",function(){d.vc(t);const i=e.$implicit;return d.gc().onEdit(i)}),d.Ub(8,"mat-icon",26),d.Fc(9,"system_update"),d.Tb(),d.Tb(),d.Ub(10,"button",29),d.cc("click",function(){d.vc(t);const i=e.$implicit;return d.gc().redirectToDelete(i)}),d.Ub(11,"mat-icon",26),d.Fc(12,"delete"),d.Tb(),d.Tb(),d.Tb()}}function R(t,e){1&t&&d.Pb(0,"tr",30)}function E(t,e){1&t&&d.Pb(0,"tr",31)}function $(t,e){if(1&t&&(d.Ub(0,"tr",32),d.Ub(1,"td",33),d.Fc(2),d.Tb(),d.Tb()),2&t){d.gc();const t=d.sc(15);d.Cb(2),d.Hc(' \u041d\u0456\u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u0430 \u0437\u0430\u0434\u0430\u043d\u0438\u043c \u0444\u0456\u043b\u044c\u0442\u0440\u043e\u043c "',t.value,'" ')}}const H=function(){return[5,10,15,20,25]},q=[{path:"",component:(()=>{class t{constructor(t,e,i,c){this.subjectsService=t,this.dialog=e,this.router=i,this.modalService=c,this.displayedColumns=["\u2116","subject_name","subject_description","operations"],this.dataSource=new o.l,this.redirectToCreate=t=>{this.subjectSubscription=this.subjectsService.create(t).subscribe(t=>{this.dataSource.data=this.dataSource.data.concat(t[0]),this.dataSource.paginator.lastPage(),this.modalService.showSnackBar("\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0438 \u0434\u043e\u0434\u0430\u043d\u043e")})},this.redirectToUpdate=(t,e)=>{this.subjectSubscription=this.subjectsService.update(t,e).subscribe(e=>{const i=this.dataSource.data.map(i=>i.subject_id===t?Object.assign({},e[0]):i);this.dataSource.data=i,this.modalService.showSnackBar("\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0438 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e")})},this.delete=t=>{this.subjectSubscription=this.subjectsService.delete(t).subscribe(()=>{this.dataSource.data=this.dataSource.data.filter(e=>e.subject_id!==t),this.modalService.showSnackBar("\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")},t=>this.modalService.showSnackBar("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u0456 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0443"))}}ngOnInit(){this.getSubjects()}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel="\u0420\u044f\u0434\u043a\u0456\u0432 \u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0456",this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}getSubjects(){this.subjectSubscription=this.subjectsService.getData().subscribe(t=>{this.dataSource.data=t,this.modalService.showSnackBar("\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e")})}redirectToDelete(t){this.dialog.open(T.a,{width:"300px",data:{group_name:t.subject_name}}).afterClosed().subscribe(e=>{e?this.delete(t.subject_id):(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}onCreate(){this.dialog.open(j,{width:"300px"}).afterClosed().subscribe(t=>{if(t){const e=Object.assign({},t);for(const t in e)e[t]||delete e[t];this.redirectToCreate(e)}})}onEdit(t){this.dialog.open(j,{width:"300px",data:t}).afterClosed().subscribe(t=>{t&&this.redirectToUpdate(t.subject_id,t)})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}redirectToTests(t){this.router.navigate(["admin/subjects/tests/",t],{})}redirectToTimetable(t){this.router.navigate(["admin/subjects/timetable/"],{queryParams:{subject_name:t.subject_name,subject_id:t.subject_id}})}ngOnDestroy(){this.subjectSubscription&&this.subjectSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(_),d.Ob(b.b),d.Ob(c.b),d.Ob(U.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-owner-list"]],viewQuery:function(t,e){if(1&t&&(d.Kc(r.a,!0),d.Kc(s.a,!0)),2&t){let t;d.rc(t=d.dc())&&(e.sort=t.first),d.rc(t=d.dc())&&(e.paginator=t.first)}},decls:34,vars:5,consts:[[1,"entity-header"],[1,"mat-h1","entity-title"],[1,"entity-title-icon"],["mat-raised-button","","color","primary",3,"click"],[1,"entity-table-filter","filter"],[1,"entity-search-label"],[1,"entity-search-icon"],["matInput","","placeholder","\u0417\u0434\u0456\u0439\u0441\u043d\u044e\u0439\u0442\u0435 \u0444\u0456\u043b\u044c\u0442\u0440\u0430\u0446\u0456\u044e \u043f\u043e \u0432\u0441\u0456\u0445 \u043a\u043e\u043b\u043e\u043d\u043a\u0430\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0456",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortStart","desc",3,"dataSource"],["matColumnDef","\u2116"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","subject_name"],["matColumnDef","subject_description"],["matColumnDef","operations"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-flat-button","","color","primary","matTooltip","\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043e \u0440\u043e\u0437\u043a\u043b\u0430\u0434\u0443",1,"operation-button",3,"click"],[1,"mat-18"],["mat-flat-button","","color","primary","matTooltip","\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043e \u0442\u0435\u0441\u0442\u0456\u0432",1,"operation-button",3,"click"],["mat-flat-button","","color","primary","matTooltip","\u041e\u043d\u043e\u0432\u0438\u0442\u0438",1,"operation-button",3,"click"],["mat-flat-button","","color","primary","matTooltip","\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",1,"operation-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(d.Ub(0,"div",0),d.Ub(1,"h1",1),d.Ub(2,"mat-icon",2),d.Fc(3,"collections_bookmark"),d.Tb(),d.Fc(4," \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0438 "),d.Tb(),d.Ub(5,"button",3),d.cc("click",function(){return e.onCreate()}),d.Ub(6,"mat-icon"),d.Fc(7,"add_circle"),d.Tb(),d.Fc(8," \u0414\u043e\u0434\u0430\u0442\u0438 \u041f\u0440\u0435\u0434\u043c\u0435\u0442 "),d.Tb(),d.Tb(),d.Ub(9,"mat-form-field",4),d.Ub(10,"mat-label",5),d.Ub(11,"mat-icon",6),d.Fc(12,"person_search"),d.Tb(),d.Fc(13," \u041f\u043e\u0448\u0443\u043a "),d.Tb(),d.Ub(14,"input",7,8),d.cc("keyup",function(t){return e.applyFilter(t)}),d.Tb(),d.Tb(),d.Ub(16,"div",9),d.Ub(17,"table",10),d.Sb(18,11),d.Dc(19,F,2,0,"th",12),d.Dc(20,O,2,1,"td",13),d.Rb(),d.Sb(21,14),d.Dc(22,k,2,0,"th",12),d.Dc(23,D,2,1,"td",13),d.Rb(),d.Sb(24,15),d.Dc(25,P,2,0,"th",12),d.Dc(26,M,2,1,"td",13),d.Rb(),d.Sb(27,16),d.Dc(28,x,2,0,"th",17),d.Dc(29,I,13,0,"td",13),d.Rb(),d.Dc(30,R,1,0,"tr",18),d.Dc(31,E,1,0,"tr",19),d.Dc(32,$,3,1,"tr",20),d.Tb(),d.Pb(33,"mat-paginator",21),d.Tb()),2&t&&(d.Cb(17),d.lc("dataSource",e.dataSource),d.Cb(13),d.lc("matHeaderRowDef",e.displayedColumns),d.Cb(1),d.lc("matRowDefColumns",e.displayedColumns),d.Cb(2),d.lc("pageSizeOptions",d.oc(4,H)))},directives:[m.a,p.b,u.c,u.g,h.b,o.k,r.a,o.c,o.e,o.b,o.g,o.j,o.h,s.a,o.d,r.b,o.a,v.a,o.f,o.i],styles:["table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.entity-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.entity-title[_ngcontent-%COMP%]{display:flex;align-items:center}.entity-title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:auto;height:auto}.entity-title[_ngcontent-%COMP%]   .entity-title-icon[_ngcontent-%COMP%]{font-size:2rem;margin-right:.5rem}.operation-button[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;justify-content:center;width:2.2rem;height:2.2rem;min-width:30px;margin:0 .5rem 0 0;padding:0 .4rem}.operation-button[_ngcontent-%COMP%]:last-child{margin:0}.operation-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;font-size:1.2rem}"]}),t})()}];let z=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},imports:[[a.c,n.a,c.f.forChild(q)]]}),t})()}}]);