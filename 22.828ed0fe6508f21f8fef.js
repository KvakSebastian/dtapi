(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{GecC:function(t,e,i){"use strict";i.r(e),i.d(e,"ProfileModule",function(){return dt});var a=i("tyNb"),c=i("ofXK"),s=i("UKGz"),n=i("R3lV"),r=i("R6Eq"),o=i("fXoL"),l=i("BEEE"),b=i("+2A9"),d=i("JK/P"),u=i("Cmua"),f=i("AytR"),p=i("NFeN"),h=i("Wp6s"),g=i("FKr1"),m=i("f0Cb");function _(t,e){if(1&t&&o.Pb(0,"img",13),2&t){const t=o.gc(2);o.mc("src",t.profileData.photo,o.wc),o.nc("alt","",t.profileData.student_fname," ",t.profileData.student_name,"")}}function S(t,e){if(1&t&&o.Pb(0,"img",13),2&t){const t=o.gc(2);o.mc("src",t.defaultImage,o.wc),o.nc("alt","",t.profileData.student_fname," ",t.profileData.student_name,"")}}function T(t,e){if(1&t&&(o.Ub(0,"div",1),o.Ub(1,"h1",2),o.Ub(2,"mat-icon",3),o.Fc(3,"assignment_ind"),o.Tb(),o.Fc(4," \u041f\u0440\u043e\u0444\u0456\u043b\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 "),o.Tb(),o.Ub(5,"mat-card",4),o.Ub(6,"div",5),o.Ub(7,"div",6),o.Dc(8,_,1,3,"img",7),o.Dc(9,S,1,3,"img",7),o.Tb(),o.Ub(10,"mat-card-content"),o.Ub(11,"div",8),o.Ub(12,"div",9),o.Ub(13,"h2"),o.Fc(14),o.Tb(),o.Tb(),o.Ub(15,"div",10),o.Ub(16,"div",11),o.Ub(17,"h2",12),o.Fc(18,"\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442:"),o.Tb(),o.Tb(),o.Ub(19,"h2"),o.Fc(20),o.Tb(),o.Tb(),o.Pb(21,"mat-divider"),o.Ub(22,"div",10),o.Ub(23,"div",11),o.Ub(24,"h2",12),o.Fc(25,"\u0421\u043f\u0435\u0446\u0456\u0430\u043b\u044c\u043d\u0456\u0441\u0442\u044c:"),o.Tb(),o.Tb(),o.Ub(26,"h2"),o.Fc(27),o.Tb(),o.Tb(),o.Pb(28,"mat-divider"),o.Ub(29,"div",10),o.Ub(30,"div",11),o.Ub(31,"h2",12),o.Fc(32,"\u0413\u0440\u0443\u043f\u0430:"),o.Tb(),o.Tb(),o.Ub(33,"h2"),o.Fc(34),o.Tb(),o.Tb(),o.Pb(35,"mat-divider"),o.Ub(36,"div",10),o.Ub(37,"div",11),o.Ub(38,"h2",12),o.Fc(39,"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043b\u0456\u043a\u043e\u0432\u043e\u0457:"),o.Tb(),o.Tb(),o.Ub(40,"h2"),o.Fc(41),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t){const t=o.gc();o.Cb(8),o.lc("ngIf",""!==t.profileData.photo),o.Cb(1),o.lc("ngIf",""===t.profileData.photo),o.Cb(5),o.Jc(" ",t.profileData.student_surname," ",t.profileData.student_name," ",t.profileData.student_fname," "),o.Cb(6),o.Hc(" ",t.profileData.faculty_name," "),o.Cb(7),o.Ic(" ",t.profileData.speciality_code," ",t.profileData.speciality_name," "),o.Cb(7),o.Hc(" ",t.profileData.group_name," "),o.Cb(7),o.Hc(" ",t.profileData.gradebook_id," ")}}let O=(()=>{class t{constructor(){this.defaultImage=f.a.defaultImage}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-profile-card"]],inputs:{profileData:"profileData"},decls:1,vars:1,consts:[["class","profile-card",4,"ngIf"],[1,"profile-card"],[1,"profile-card__title"],[1,"header-icon"],["matRipple",""],[1,"card"],[1,"profile-card__student-photo"],["class","student-photo","mat-card-lg-image","",3,"src","alt",4,"ngIf"],[1,"profile-card__student-data"],[1,"profile-card__student-title"],[1,"profile-card__student-other-data"],[1,"profile-card__data-title"],[1,"title"],["mat-card-lg-image","",1,"student-photo",3,"src","alt"]],template:function(t,e){1&t&&o.Dc(0,T,42,10,"div",0),2&t&&o.lc("ngIf",e.profileData)},directives:[c.k,p.a,h.a,g.q,h.c,m.a,h.f],styles:[".profile-card[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:30px;margin:-10px 10px auto auto}.profile-card__title[_ngcontent-%COMP%]{font-size:30px;font-weight:500;margin-bottom:40px;text-align:center}.profile-card__student-photo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:25px auto}.profile-card__student-photo[_ngcontent-%COMP%]   .student-photo[_ngcontent-%COMP%]{width:230px;height:230px}.profile-card__student-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.profile-card__student-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:550}.profile-card__student-other-data[_ngcontent-%COMP%]{margin-bottom:-7px;display:flex;flex-direction:row}.profile-card__student-other-data[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin-top:10px;margin-left:7px}.profile-card__data-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:16px}"]}),t})();var j=i("M9IT"),v=i("+0xr"),C=i("cp0P"),D=i("LRne"),P=i("5+tZ"),y=i("bOdf"),U=i("kmnG"),w=i("d3UM"),M=i("qFsG"),x=i("bTqV"),F=i("Qu3c");const I=function(t,e){return{name:t,id:e}};function k(t,e){if(1&t&&(o.Ub(0,"mat-option",28),o.Fc(1),o.Tb()),2&t){const t=e.$implicit;o.lc("value",o.qc(2,I,t.subject_name,t.subject_id)),o.Cb(1),o.Hc(" ",t.subject_name," ")}}function E(t,e){1&t&&(o.Ub(0,"th",29),o.Fc(1,"\u041f\u0440\u0435\u0434\u043c\u0435\u0442"),o.Tb())}function R(t,e){if(1&t&&(o.Ub(0,"td",30),o.Fc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Hc(" ",t.subjectname," ")}}function B(t,e){1&t&&(o.Ub(0,"th",29),o.Fc(1,"\u0422\u0435\u0441\u0442"),o.Tb())}function z(t,e){if(1&t&&(o.Ub(0,"td",30),o.Fc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Hc(" ",t.test_name," ")}}function H(t,e){1&t&&(o.Ub(0,"th",29),o.Fc(1,"\u041f\u043e\u0447\u0430\u0442\u043e\u043a"),o.Tb())}function G(t,e){if(1&t&&(o.Ub(0,"td",30),o.Ub(1,"span"),o.Fc(2),o.Tb(),o.Pb(3,"br"),o.Fc(4),o.Tb()),2&t){const t=e.$implicit;o.Cb(2),o.Gc(t.start_date),o.Cb(2),o.Hc(" ",t.start_time," ")}}function N(t,e){1&t&&(o.Ub(0,"th",29),o.Fc(1,"\u041a\u0456\u043d\u0435\u0446\u044c"),o.Tb())}function $(t,e){if(1&t&&(o.Ub(0,"td",30),o.Ub(1,"span"),o.Fc(2),o.Tb(),o.Pb(3,"br"),o.Fc(4),o.Tb()),2&t){const t=e.$implicit;o.Cb(2),o.Hc(" ",t.end_date,""),o.Cb(2),o.Hc(" ",t.end_time," ")}}function L(t,e){1&t&&(o.Ub(0,"th",29),o.Fc(1,"\u041a-\u0441\u0442\u044c \u0437\u0430\u0432\u0434\u0430\u043d\u044c"),o.Tb())}function A(t,e){if(1&t&&(o.Ub(0,"td",30),o.Fc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Gc(t.tasks)}}function q(t,e){1&t&&(o.Ub(0,"th",29),o.Fc(1,"\u0422\u0440\u0438\u0432\u0430\u043b\u0456\u0441\u0442\u044c"),o.Tb())}function K(t,e){if(1&t&&(o.Ub(0,"td",30),o.Fc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Hc(" ",t.time_for_test," ")}}function J(t,e){1&t&&(o.Ub(0,"th",29),o.Fc(1,"\u041a-\u0441\u0442\u044c \u0441\u043f\u0440\u043e\u0431"),o.Tb())}function Q(t,e){if(1&t&&(o.Ub(0,"td",30),o.Fc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Gc(t.attempts)}}function V(t,e){1&t&&(o.Ub(0,"th",29),o.Fc(1,"\u0417\u0434\u0430\u0442\u0438 \u0442\u0435\u0441\u0442"),o.Tb())}function X(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",30),o.Ub(1,"button",31),o.cc("click",function(){o.vc(t);const i=e.$implicit;return o.gc().checkPossibilityToPassTest(i)}),o.Ub(2,"mat-icon"),o.Fc(3,"not_started"),o.Tb(),o.Tb(),o.Tb()}}function Y(t,e){1&t&&o.Pb(0,"tr",32)}function W(t,e){1&t&&o.Pb(0,"tr",33)}function Z(t,e){if(1&t&&(o.Ub(0,"tr",34),o.Ub(1,"td",35),o.Fc(2),o.Tb(),o.Tb()),2&t){o.gc();const t=o.sc(20);o.Cb(2),o.Hc(' \u041d\u0456\u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u0430 \u0437\u0430\u0434\u0430\u043d\u0438\u043c \u0444\u0456\u043b\u044c\u0442\u0440\u043e\u043c "',t.value,'" ')}}function tt(t,e){1&t&&(o.Ub(0,"div",36),o.Ub(1,"mat-icon",37),o.Fc(2,"report"),o.Tb(),o.Ub(3,"h1"),o.Fc(4," \u0422\u0435\u0441\u0442\u0438 \u0437 \u0434\u0430\u043d\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0443 "),o.Pb(5,"br"),o.Fc(6," \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456 "),o.Tb(),o.Tb())}function et(t,e){1&t&&(o.Ub(0,"div",38),o.Ub(1,"mat-icon",37),o.Fc(2,"playlist_add_check"),o.Tb(),o.Ub(3,"h1"),o.Fc(4,"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u0443\u0432\u0430\u043d\u043d\u044f"),o.Tb(),o.Tb())}const it=function(){return[5,10,20]};let at=(()=>{class t{constructor(t,e,i,a,c){this.modalService=t,this.router=e,this.profileService=i,this.testPlayerService=a,this.alertService=c,this.newSubjects=[],this.hide=!1,this.startText=!1,this.testsBySubject=[],this.testDetails=[],this.allTestDetails=[],this.dataSource=new v.l,this.displayedColumns=n.i}ngOnInit(){this.currentDate=new Date,this.hide=!0,this.getTestInfoByGroup()}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel="\u0420\u044f\u0434\u043a\u0456\u0432 \u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0456",this.dataSource.paginator=this.paginator}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getTestInfoByGroup(){this.dataSource=new v.l,this.profileSubscription=this.profileService.getTestDetails(this.groupId).pipe(Object(P.a)(t=>{if(t.length){this.testsBySubject=t,this.subjectsIds=t.map(t=>t.subject_id),this.alertService.message(Object(n.d)("isTests"));const e=this.subjectsIds.map(t=>this.profileService.getTestDate(t));return Object(C.a)(e)}return this.startText=!0,this.testsBySubject=[],this.alertService.message(Object(n.d)("noTests")),Object(D.a)()})).subscribe({next:t=>{this.newSubjects.length||this.getNewSubjects(this.testsBySubject),this.testsBySubject.forEach(e=>{let i;t.forEach(t=>{i=t.forEach(t=>{t.subject_id===e.subject_id&&(i=Object.assign(Object.assign(Object.assign({},e),t),{subjectname:this.getSubName(e.subject_id)}),this.testDetails.push(i))})})}),this.dataSource.data=this.testDetails,this.dataSource.paginator=this.paginator},error:t=>{this.alertService.error(Object(n.d)("activeTestsError"))}})}selectSubject(t){const e=t.value;"ALL"===e?this.getTestInfoByGroup():(this.subjectID=e.id,this.subjectName=e.name,this.getTestInfo())}getTestInfo(){this.profileSubscription=this.profileService.getTestDate(this.subjectID).pipe(Object(y.a)(t=>t.length?(this.testsBySubject=t,this.alertService.message(Object(n.d)("isTests")),this.profileService.getTestDetails(this.groupId)):(this.hide=!1,this.testsBySubject=[],this.alertService.message(Object(n.d)("noTests")),Object(D.a)()))).subscribe({next:t=>{let e=t[0]?t[0]:t;"no records"===e.response&&(e={end_date:Object(n.d)("noTestData"),start_date:Object(n.d)("noTestData")}),this.testDetails=[...this.testsBySubject].map(t=>Object.assign(Object.assign(Object.assign({},t),e),{subjectname:this.subjectName})),this.dataSource=new v.l(this.testDetails),this.dataSource.paginator=this.paginator},error:t=>{this.alertService.error(Object(n.d)("subjectTestsError",this.subjectName))}})}getSubName(t){return this.subjects.filter(e=>e.subject_id===t)[0].subject_name}getNewSubjects(t){t.forEach(t=>{const e=this.subjects.filter(e=>t.subject_id===e.subject_id);this.newSubjects.push(e[0])})}checkCurrentDate(t){const e=new Date(""+t.start_date),i=new Date(`${t.start_date} ${t.start_time}`),a=new Date(`${t.end_date} ${t.end_time}`);return this.currentDate>=e&&this.currentDate<=a?Object(n.a)("willBeAvailableToday",t):this.currentDate>i&&this.currentDate>a?Object(n.a)("noAvailable",t):this.currentDate<i&&this.currentDate<a?Object(n.a)("willBeAvailableLater",t):Object(n.a)("notData",t)}checkPossibilityToPassTest(t){this.profileSubscription=this.profileService.testPlayerGetTest(t.test_id).subscribe(()=>{this.confirmStartTest(t)},e=>{this.alertService.warning(this.checkCurrentDate(t))})}confirmStartTest(t){this.modalService.openModal(r.a,{data:{icon:"school",message:Object(n.d)("confirmStartTest","",t)}},e=>{e?this.startTest(t):e||this.alertService.message(Object(n.e)("cancel"))})}startTest(t){this.profileSubscription=this.testPlayerService.getLog(+t.test_id).subscribe(e=>{"ok"===e.response&&(this.saveSession(t),this.modalService.showSnackBar(Object(n.f)("startTest")))},e=>{this.startTestErrorHandler(e,t)})}saveSession(t){this.profileSubscription=this.testPlayerService.testPlayerSaveData({id:+t.test_id,testInProgress:!0,currentTest:t}).subscribe(t=>{t.response&&this.router.navigate(["student/test-player"])},t=>{this.alertService.error(Object(n.f)("saveSessionError"))})}getSession(t){this.profileSubscription=this.testPlayerService.testPlayerGetData().subscribe(e=>{+e.id==+t.test_id?this.router.navigate(["student/test-player"]):this.alertService.error(Object(n.f)("makingTest",!1))},t=>{this.alertService.error(Object(n.f)("getSessionError"))})}startTestErrorHandler(t,e){switch(t.error.response){case Object(n.f)("scheduleError",!0):this.alertService.error(Object(n.f)("scheduleError",!1));break;case Object(n.f)("numberOfQuestions",!0):this.alertService.error(Object(n.f)("numberOfQuestions",!1));break;case Object(n.f)("allAttempts",!0):this.alertService.error(Object(n.f)("allAttempts",!1));break;case Object(n.f)("makingTest",!0):this.getSession(e);break;case Object(n.f)("onlyForYou",!0):this.alertService.error(Object(n.f)("onlyForYou",!1));break;case Object(n.f)("paramsNotFound",!0):this.alertService.error(Object(n.f)("paramsNotFound",!1));break;case Object(n.f)("madeRecently",!0):this.alertService.error(Object(n.f)("madeRecently",!1));break;default:this.alertService.error(Object(n.f)("default"))}}ngOnDestroy(){this.profileSubscription&&this.profileSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(d.a),o.Ob(a.b),o.Ob(l.a),o.Ob(b.a),o.Ob(u.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-profile-table"]],viewQuery:function(t,e){if(1&t&&o.Kc(j.a,!0),2&t){let t;o.rc(t=o.dc())&&(e.paginator=t.first)}},inputs:{subjects:"subjects",groupId:"groupId"},decls:53,vars:10,consts:[[1,"profile-table"],[1,"profile-table__title"],[1,"header-icon"],[1,"select-subject"],[1,"search-icon"],[1,"profile-select",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["value","ALL"],["matInput","","placeholder","\u0417\u0434\u0456\u0439\u0441\u043d\u044e\u0439\u0442\u0435 \u0444\u0456\u043b\u044c\u0442\u0440\u0430\u0446\u0456\u044e \u043f\u043e \u0432\u0441\u0456\u0445 \u043a\u043e\u043b\u043e\u043d\u043a\u0430\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\u0456",3,"disabled","keyup"],["input",""],[1,"mat-elevation-z8","profile-table__table",3,"hidden"],["mat-table","",1,"profile-table__table","mat-elevation-z8",3,"dataSource"],["matColumnDef","\u041f\u0440\u0435\u0434\u043c\u0435\u0442"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","\u0422\u0435\u0441\u0442"],["matColumnDef","\u041f\u043e\u0447\u0430\u0442\u043e\u043a"],["matColumnDef","\u041a\u0456\u043d\u0435\u0446\u044c"],["matColumnDef","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0437\u0430\u0432\u0434\u0430\u043d\u044c"],["matColumnDef","\u0422\u0440\u0438\u0432\u0430\u043b\u0456\u0441\u0442\u044c \u0442\u0435\u0441\u0442\u0443"],["matColumnDef","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0441\u043f\u0440\u043e\u0431"],["matColumnDef","\u041f\u043e\u0447\u0430\u0442\u0438 \u0442\u0435\u0441\u0442\u0443\u0432\u0430\u043d\u043d\u044f"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["class","empty-data-test",4,"ngIf"],["class","empty-data-test select",4,"ngIf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-flat-button","","color","primary","matTooltip","\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u0440\u043e\u0437\u043f\u043e\u0447\u0430\u0442\u0438",1,"operation-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],[1,"empty-data-test"],[1,"dark-theme-icon"],[1,"empty-data-test","select"]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"h1",1),o.Ub(2,"mat-icon",2),o.Fc(3,"schedule"),o.Tb(),o.Fc(4," \u0420\u043e\u0437\u043a\u043b\u0430\u0434 \u0442\u0435\u0441\u0442\u0443\u0432\u0430\u043d\u043d\u044f "),o.Tb(),o.Ub(5,"mat-form-field",3),o.Ub(6,"mat-label"),o.Ub(7,"mat-icon",4),o.Fc(8,"collections_bookmark"),o.Tb(),o.Fc(9," \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0438 "),o.Tb(),o.Ub(10,"mat-select",5),o.cc("selectionChange",function(t){return e.selectSubject(t)}),o.Dc(11,k,2,5,"mat-option",6),o.Ub(12,"mat-option",7),o.Fc(13," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0432\u0441\u0456 "),o.Tb(),o.Tb(),o.Tb(),o.Ub(14,"mat-form-field"),o.Ub(15,"mat-label"),o.Ub(16,"mat-icon",4),o.Fc(17,"person_search"),o.Tb(),o.Fc(18," \u0424\u0456\u043b\u044c\u0442\u0440 "),o.Tb(),o.Ub(19,"input",8,9),o.cc("keyup",function(t){return e.applyFilter(t)}),o.Tb(),o.Tb(),o.Ub(21,"div",10),o.Ub(22,"table",11),o.Sb(23,12),o.Dc(24,E,2,0,"th",13),o.Dc(25,R,2,1,"td",14),o.Rb(),o.Sb(26,15),o.Dc(27,B,2,0,"th",13),o.Dc(28,z,2,1,"td",14),o.Rb(),o.Sb(29,16),o.Dc(30,H,2,0,"th",13),o.Dc(31,G,5,2,"td",14),o.Rb(),o.Sb(32,17),o.Dc(33,N,2,0,"th",13),o.Dc(34,$,5,2,"td",14),o.Rb(),o.Sb(35,18),o.Dc(36,L,2,0,"th",13),o.Dc(37,A,2,1,"td",14),o.Rb(),o.Sb(38,19),o.Dc(39,q,2,0,"th",13),o.Dc(40,K,2,1,"td",14),o.Rb(),o.Sb(41,20),o.Dc(42,J,2,0,"th",13),o.Dc(43,Q,2,1,"td",14),o.Rb(),o.Sb(44,21),o.Dc(45,V,2,0,"th",13),o.Dc(46,X,4,0,"td",14),o.Rb(),o.Dc(47,Y,1,0,"tr",22),o.Dc(48,W,1,0,"tr",23),o.Dc(49,Z,3,1,"tr",24),o.Tb(),o.Pb(50,"mat-paginator",25),o.Tb(),o.Dc(51,tt,7,0,"div",26),o.Dc(52,et,5,0,"div",27),o.Tb()),2&t&&(o.Cb(11),o.lc("ngForOf",e.newSubjects),o.Cb(8),o.lc("disabled",!e.testsBySubject.length||!e.dataSource.data.length),o.Cb(2),o.lc("hidden",!e.testsBySubject.length||!e.dataSource.data.length),o.Cb(1),o.lc("dataSource",e.dataSource),o.Cb(25),o.lc("matHeaderRowDef",e.displayedColumns),o.Cb(1),o.lc("matRowDefColumns",e.displayedColumns),o.Cb(2),o.lc("pageSizeOptions",o.oc(9,it)),o.Cb(1),o.lc("ngIf",!e.testsBySubject.length&&!e.hide),o.Cb(1),o.lc("ngIf",!e.dataSource.data.length&&e.startText))},directives:[p.a,U.c,U.g,w.a,c.j,g.m,M.b,v.k,v.c,v.e,v.b,v.g,v.j,v.h,j.a,c.k,v.d,v.a,x.b,F.a,v.f,v.i],styles:[".profile-table[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:30px;margin:-11px 10px auto auto}.profile-table[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:20px;margin:-3px 5px auto auto}.profile-table[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:16px;width:100%}.profile-table[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.profile-table__title[_ngcontent-%COMP%]{font-size:30px;font-weight:500;text-align:center}.profile-table__table[_ngcontent-%COMP%]{margin-top:10px}.profile-table__table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .profile-table__table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;padding:.3em 1.5em}@media screen and (max-width:600px){.profile-table__table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .profile-table__table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px;padding:1px;word-break:break-word}}.profile-table[_ngcontent-%COMP%]   .empty-data-test[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:fixed;top:48%;left:52%}.profile-table[_ngcontent-%COMP%]   .empty-data-test[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:70px;color:#3f51b5}.profile-table[_ngcontent-%COMP%]   .empty-data-test[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-left:48px}"]}),t})();var ct=i("668k");function st(t,e){if(1&t&&(o.Ub(0,"div",7),o.Pb(1,"app-profile-table",8),o.Tb()),2&t){const t=o.gc(2);o.Cb(1),o.lc("subjects",t.subjects)("groupId",t.groupId)}}function nt(t,e){1&t&&(o.Ub(0,"div",10),o.Ub(1,"mat-icon",11),o.Fc(2,"report"),o.Tb(),o.Ub(3,"h1",12),o.Fc(4,"\u0414\u0430\u043d\u0456 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456"),o.Tb(),o.Tb())}function rt(t,e){if(1&t&&o.Dc(0,nt,5,0,"div",9),2&t){const t=o.gc(2);o.lc("ngIf",!t.studentProfileData)}}function ot(t,e){if(1&t&&(o.Ub(0,"div",2),o.Ub(1,"div",3),o.Pb(2,"app-profile-card",4),o.Tb(),o.Dc(3,st,2,2,"div",5),o.Dc(4,rt,1,1,"ng-template",null,6,o.Ec),o.Tb()),2&t){const t=o.sc(5),e=o.gc();o.Cb(2),o.lc("profileData",e.studentProfileData),o.Cb(1),o.lc("ngIf",e.subjects.length&&e.studentProfileData)("ngIfElse",t)}}function lt(t,e){1&t&&o.Pb(0,"app-loader")}let bt=(()=>{class t{constructor(t,e,i,a,c){this.router=t,this.profileService=e,this.testPlayerService=i,this.modalService=a,this.alertService=c,this.loading=!1,this.subjects=[]}ngOnInit(){this.loading=!0,this.getStudentInfo(),this.getSubjectInfo(),this.getSession(),this.isMatch()}getStudentInfo(){this.profileSubscription=this.profileService.getAllStudentData().subscribe(t=>{t?(this.alertService.message(Object(n.c)("welcome",t)),this.studentProfileData=t,this.groupId=t.group_id,this.loading=!1):(this.studentProfileData=null,this.loading=!1)},t=>{this.loading=!1,this.alertService.error(Object(n.c)("student"))})}getSubjectInfo(){this.profileSubscription=this.profileService.getRecords("Subject").subscribe(t=>{t?this.subjects=t:this.alertService.message(Object(n.c)("emptySubjects"))},t=>{this.loading=!1,this.alertService.error(Object(n.c)("subjects"))})}getSession(){this.profileSubscription=this.testPlayerService.testPlayerGetData().subscribe(t=>{t.id&&t.currentTest&&t.testInProgress&&this.confirmContinueTest(t.currentTest.test_name,t.currentTest.subjectname)},t=>{this.alertService.error(Object(n.c)("getSessionError"))})}confirmContinueTest(t,e){this.modalService.openModal(r.a,{data:{icon:"school",message:Object(n.c)("continueTest",null,t,e)}},e=>{e?this.router.navigate(["student/test-player"]):e||this.alertService.message(Object(n.c)("snackbarCancel",null,t))})}isMatch(){"notMatch"===localStorage.getItem("isMatch")&&this.alertService.error(Object(n.c)("isMatch")),localStorage.setItem("isMatch",null)}ngOnDestroy(){this.profileSubscription&&this.profileSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(a.b),o.Ob(l.a),o.Ob(b.a),o.Ob(d.a),o.Ob(u.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-profile-page"]],decls:3,vars:2,consts:[["class","profile",4,"ngIf","ngIfElse"],["loader",""],[1,"profile"],[1,"profile__student-info"],[3,"profileData"],["class","profile__test",4,"ngIf","ngIfElse"],["empty",""],[1,"profile__test"],[3,"subjects","groupId"],["class","empty-data",4,"ngIf"],[1,"empty-data"],[1,"empty-data-icon"],[1,"empty-data-text"]],template:function(t,e){if(1&t&&(o.Dc(0,ot,6,3,"div",0),o.Dc(1,lt,1,0,"ng-template",null,1,o.Ec)),2&t){const t=o.sc(2);o.lc("ngIf",!e.loading)("ngIfElse",t)}},directives:[c.k,O,at,p.a,ct.a],styles:[".profile[_ngcontent-%COMP%]{padding:70px 0;display:flex;width:100%;justify-content:space-evenly;flex-wrap:wrap;align-items:flex-start}.profile__student-info[_ngcontent-%COMP%]{width:auto}.profile__test[_ngcontent-%COMP%]{width:65%}.profile[_ngcontent-%COMP%]   .empty-data-subjects[_ngcontent-%COMP%]{display:inline-block;top:84%;left:41.7%;position:absolute;text-align:center}.profile[_ngcontent-%COMP%]   .empty-data-subjects[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{border-radius:4px;font-size:28px;font-weight:500;color:#f4f4f4;background:#3f51b5;padding:10px 15px}"]}),t})(),dt=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[c.c,s.a,a.f.forChild([{path:"",component:bt}])]]}),t})()}}]);