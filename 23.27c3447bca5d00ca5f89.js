(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{tRV5:function(t,e,n){"use strict";n.r(e),n.d(e,"TestPlayerModule",function(){return K});var s=n("tyNb"),i=n("ofXK"),r=n("UKGz"),c=n("LPYB"),o=n("R6Eq"),a=n("R3lV"),u=n("fXoL"),h=n("+2A9"),l=n("JK/P"),b=n("Cmua"),m=n("HDdC"),d=n("D0XW"),g=n("Y7HM");function p(t){const{subscriber:e,counter:n,period:s}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:s},s)}var _=n("NFeN"),f=n("bTqV"),w=n("Qu3c"),T=n("f0Cb"),v=n("znSr");const A=function(t,e){return{warning:t,danger:e}};function C(t,e){if(1&t&&(u.Ub(0,"div",11),u.Ub(1,"h1",12),u.Ub(2,"mat-icon",13),u.Fc(3,"schedule"),u.Tb(),u.Fc(4),u.Tb(),u.Tb()),2&t){const t=u.gc();u.lc("ngClass",u.qc(4,A,t.timer.minutes<10&&0==t.timer.hours,t.timer.minutes<2&&0==t.timer.hours)),u.Cb(4),u.Jc(" ",t.timer.hours,":",t.timer.minutes,":",t.timer.seconds," ")}}function O(t,e){1&t&&(u.Ub(0,"div",14),u.Ub(1,"h1",15),u.Ub(2,"mat-icon",13),u.Fc(3,"schedule"),u.Tb(),u.Fc(4," \u0412\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0447\u0430\u0441\u0443... "),u.Tb(),u.Tb())}let x=(()=>{class t{constructor(t,e,n){this.router=t,this.testPlayerService=e,this.alertService=n,this.onCheck=new u.o,this.time={curtime:0,unix_timestamp:0,offset:0},this.timer={hours:0,minutes:0,seconds:0},this.timerInterval$=function(t=0,e=d.a){return(!Object(g.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=d.a),new m.a(n=>(n.add(e.schedule(p,t,{subscriber:n,counter:0,period:t})),n))}(1e3)}ngOnInit(){this.intervalSubscription=this.timerInterval$.subscribe(()=>{this.createTimer()}),this.getTestTime()}createTimer(){this.timer.hours=Math.floor(this.count/36e5),parseInt(this.timer.hours,10)<10&&(this.timer.hours="0"+this.timer.hours),this.timer.minutes=Math.floor(this.count%36e5/6e4),parseInt(this.timer.minutes,10)<10&&(this.timer.minutes="0"+this.timer.minutes),this.timer.seconds=Math.floor(this.count%6e4/1e3),parseInt(this.timer.seconds,10)<10&&(this.timer.seconds="0"+this.timer.seconds),this.count-=1e3,this.count<=-1&&(this.timer.hours="00",this.timer.minutes="00",this.timer.seconds="00",this.finishTest(!0))}getTestTime(){this.timeForTest=60*this.test.time_for_test*1e3,this.getServerTimeAndSynchronize()}getServerTimeAndSynchronize(){this.timerSubscription=this.testPlayerService.getServerTime().subscribe(t=>{this.time.curtime=1e3*t.unix_timestamp,this.startDate=new Date(this.time.curtime).getTime(),this.endDate=this.startDate+this.timeForTest,this.count=this.endDate-this.startDate,this.getEndTestTime()},t=>{this.alertService.error(Object(a.k)("syncError")),this.router.navigate(["/student/profile"])})}getEndTestTime(){this.timerSubscription=this.testPlayerService.testPlayerGetEndTime().subscribe(t=>{"Empty slot"===t.response?this.saveTestTime():(this.count=t.end-this.startDate,this.count>this.endDate-this.startDate&&(this.count=this.endDate-this.startDate),null===this.count&&this.resetSession(!0))},t=>{this.alertService.error(Object(a.k)("endError")),this.router.navigate(["/student/profile"])})}saveTestTime(){this.timerSubscription=this.testPlayerService.testPlayerSaveEndTime({end:this.startDate+this.count}).subscribe(()=>{},t=>{this.alertService.error(Object(a.k)("saveError")),this.router.navigate(["/student/profile"])})}finishTest(t){t?(this.intervalSubscription.unsubscribe(),this.resetSession(!1)):this.onCheck.emit({time:!1,finish:!0})}resetSession(t){this.timerSubscription=this.testPlayerService.testPlayerResetSession().subscribe(e=>{e&&t?this.alertService.error(Object(a.k)("timerError")):e&&!t&&(this.alertService.message(Object(a.g)("finish",!1,"",!0)),this.onCheck.emit({time:!0,finish:!1}))},t=>{this.alertService.error(Object(a.h)("reset")),this.router.navigate(["/student/profile"])})}ngOnDestroy(){(this.timerSubscription||this.intervalSubscription)&&(this.timerSubscription.unsubscribe(),this.intervalSubscription.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(s.b),u.Ob(h.a),u.Ob(b.a))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-timer"]],inputs:{test:"test"},outputs:{onCheck:"onCheck"},decls:22,vars:4,consts:[[1,"timer"],[1,"timer__info"],[1,"test-name"],[1,"timer-icon"],[1,"test-subject"],[1,"timer__panel"],[1,"timer-panel-text"],["class","timer-circle",3,"ngClass",4,"ngIf","ngIfElse"],["initTime",""],[1,"timer__actions"],["type","button","mat-flat-button","","color","warn","matTooltip","\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u0442\u0435\u0441\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0430 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",1,"finish-btn",3,"click"],[1,"timer-circle",3,"ngClass"],[1,"timer-numbers"],[1,"timer-panel-icon"],[1,"timer-circle"],[1,"timer-init"]],template:function(t,e){if(1&t&&(u.Ub(0,"div",0),u.Ub(1,"div",1),u.Ub(2,"h1",2),u.Ub(3,"mat-icon",3),u.Fc(4,"school"),u.Tb(),u.Fc(5),u.Tb(),u.Ub(6,"h1",4),u.Ub(7,"mat-icon",3),u.Fc(8,"collections_bookmark"),u.Tb(),u.Fc(9),u.Tb(),u.Tb(),u.Ub(10,"div",5),u.Ub(11,"h1",6),u.Fc(12,"\u0414\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f \u0442\u0435\u0441\u0442\u0443:"),u.Tb(),u.Dc(13,C,5,7,"div",7),u.Dc(14,O,5,0,"ng-template",null,8,u.Ec),u.Tb(),u.Ub(16,"div",9),u.Ub(17,"button",10),u.cc("click",function(){return e.finishTest(!1)}),u.Ub(18,"mat-icon"),u.Fc(19,"check"),u.Tb(),u.Fc(20," \u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u0442\u0435\u0441\u0442 "),u.Tb(),u.Tb(),u.Tb(),u.Pb(21,"mat-divider")),2&t){const t=u.sc(15);u.Cb(5),u.Hc(" ",e.test.test_name," "),u.Cb(4),u.Hc(" ",e.test.subjectname," "),u.Cb(4),u.lc("ngIf",e.timer.hours||e.timer.minutes||e.timer.seconds)("ngIfElse",t)}},directives:[_.a,i.k,f.b,w.a,T.a,i.i,v.a],styles:[".timer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.timer[_ngcontent-%COMP%]   .timer-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:30px;margin:-11px 10px auto auto}.timer__info[_ngcontent-%COMP%]{margin-top:5px}.timer__info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:580}.timer__panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500}.timer__panel[_ngcontent-%COMP%]   .timer-circle[_ngcontent-%COMP%]{text-align:center;border-radius:15px;padding:11px 0 12px;background:#3f51b5;color:#fff}.timer__panel[_ngcontent-%COMP%]   .timer-circle.warning[_ngcontent-%COMP%]{background:#fceb6f;color:#000}.timer__panel[_ngcontent-%COMP%]   .timer-circle.danger[_ngcontent-%COMP%]{background:#f44336;color:#000}.timer__panel[_ngcontent-%COMP%]   .timer-panel-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:30px;margin:-10px 10px auto auto}.timer__panel[_ngcontent-%COMP%]   .timer-numbers[_ngcontent-%COMP%]{margin-bottom:0;font-size:25px}.timer__panel[_ngcontent-%COMP%]   .timer-init[_ngcontent-%COMP%]{font-size:20px;margin-bottom:0}.timer__actions[_ngcontent-%COMP%]{margin-top:25px}.timer__actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:2px;padding-right:5px}.timer__actions[_ngcontent-%COMP%]   .finish-btn[_ngcontent-%COMP%]{font-size:16px;padding:5px 30px}mat-divider[_ngcontent-%COMP%]{margin-top:20px}"]}),t})();var P=n("3Pt+"),q=n("Wp6s"),y=n("bSwM"),M=n("kmnG"),S=n("qFsG");const k=function(t,e){return{active:t,done:e}};function U(t,e){if(1&t){const t=u.Vb();u.Ub(0,"button",11),u.cc("click",function(n){u.vc(t);const s=e.index;return u.gc().changeQuestion(n,s)}),u.Fc(1),u.Tb()}if(2&t){const t=e.index,n=u.gc();u.lc("ngClass",u.qc(2,k,n.startTest===t,n.isAnswer[t]===t)),u.Cb(1),u.Hc(" ",t+1," ")}}function D(t,e){if(1&t&&(u.Ub(0,"div",12),u.Pb(1,"img",13),u.Tb()),2&t){const t=u.gc();u.Cb(1),u.mc("src",t.questionsAndAnswers[t.startTest].attachment,u.wc)}}function I(t,e){if(1&t&&(u.Ub(0,"div"),u.Pb(1,"img",19),u.Tb()),2&t){const t=u.gc().$implicit;u.Cb(1),u.mc("src",t.attachment,u.wc)}}function z(t,e){if(1&t){const t=u.Vb();u.Ub(0,"div"),u.Ub(1,"div"),u.Ub(2,"mat-checkbox",16),u.cc("change",function(n){u.vc(t);const s=e.$implicit;return u.gc(2).trueAnswerSimpleOne(n,s.answer_id)}),u.Tb(),u.Ub(3,"span",17),u.Fc(4),u.Tb(),u.Tb(),u.Dc(5,I,2,1,"div",18),u.Tb()}if(2&t){const t=e.$implicit,n=u.gc(2);u.Cb(2),u.mc("id",t.answer_id),u.lc("checked",t.answer_id===n.completed[n.startTest]),u.Cb(2),u.Gc(t.answer_text),u.Cb(1),u.lc("ngIf",t.attachment)}}function E(t,e){if(1&t&&(u.Sb(0,14),u.Dc(1,z,6,4,"div",15),u.Rb()),2&t){const t=u.gc();u.Cb(1),u.lc("ngForOf",t.questionsAndAnswers[t.startTest].answers)}}function F(t,e){if(1&t&&(u.Ub(0,"div"),u.Pb(1,"img",19),u.Tb()),2&t){const t=u.gc().$implicit;u.Cb(1),u.mc("src",t.attachment,u.wc)}}function j(t,e){if(1&t){const t=u.Vb();u.Ub(0,"div"),u.Ub(1,"div"),u.Ub(2,"mat-checkbox",21),u.cc("change",function(n){u.vc(t);const s=e.$implicit;return u.gc(2).trueAnswerMulti(n,s.answer_id)}),u.Tb(),u.Ub(3,"span",17),u.Fc(4),u.Tb(),u.Tb(),u.Dc(5,F,2,1,"div",18),u.Tb()}if(2&t){const t=e.$implicit,n=u.gc(2);u.Cb(2),u.mc("id",t.answer_id),u.lc("checked",n.getTrueAnswer(t.answer_id,n.startTest)),u.Cb(2),u.Gc(t.answer_text),u.Cb(1),u.lc("ngIf",t.attachment)}}function Q(t,e){if(1&t&&(u.Sb(0,20),u.Dc(1,j,6,4,"div",15),u.Rb()),2&t){const t=u.gc();u.Cb(1),u.lc("ngForOf",t.questionsAndAnswers[t.startTest].answers)}}function N(t,e){if(1&t){const t=u.Vb();u.Ub(0,"div",22),u.Ub(1,"mat-form-field"),u.Ub(2,"mat-label"),u.Fc(3,"\u0412\u0430\u0448\u0430 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u044c"),u.Tb(),u.Ub(4,"input",23),u.cc("change",function(e){return u.vc(t),u.gc().trueAnswerText(e)}),u.Tb(),u.Tb(),u.Tb()}if(2&t){const t=u.gc();u.Cb(4),u.lc("value",t.textValue[t.startTest]?t.textValue[t.startTest]:"")}}function V(t,e){if(1&t){const t=u.Vb();u.Ub(0,"div",24),u.Ub(1,"mat-form-field"),u.Ub(2,"mat-label"),u.Fc(3,"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"),u.Tb(),u.Ub(4,"input",25),u.cc("change",function(e){return u.vc(t),u.gc().truAnswerNum(e)}),u.Tb(),u.Tb(),u.Tb()}if(2&t){const t=u.gc();u.Cb(4),u.lc("value",t.answersIdNum[t.startTest]?t.answersIdNum[t.startTest]:"")}}let R=(()=>{class t{constructor(){this.onAnswer=new u.o,this.isAnswer=[],this.answersIdNum=[],this.answerIdsMulti=[],this.completed=[],this.btnCount=[],this.startTest=0,this.sendAnswerData=[],this.textValue=[]}ngOnInit(){this.onAnswer.emit(this.firstEmitData()),this.getRandomAnswers(this.questionsAndAnswers),this.btnCount=[...Array(this.questionsAndAnswers.length).keys()]}firstEmitData(){let t=[];return t=this.questionsAndAnswers.map(t=>({question_id:+t.question_id,answer_ids:[""]})),t}changeQuestion(t,e){t.preventDefault(),this.startTest=e}trueAnswerMulti(t,e){t.checked?this.answerIdsMulti.push(e):t.checked||(this.answerIdsMulti=this.answerIdsMulti.filter(t=>t!==e)),this.sendAnswerData[this.startTest]=this.createStudentAnswer(+this.questionsAndAnswers[this.startTest].question_id,this.answerIdsMulti),this.onAnswer.emit(this.removeEmptyElem(this.sendAnswerData)),this.markStudentAnswer()}trueAnswerSimpleOne(t,e){t.checked?(this.completed[this.startTest]=e,this.sendAnswerData[this.startTest]=this.createStudentAnswer(+this.questionsAndAnswers[this.startTest].question_id,[e])):t.checked||(this.completed[this.startTest]=null,this.sendAnswerData[this.startTest]=null),this.onAnswer.emit(this.removeEmptyElem(this.sendAnswerData)),this.markStudentAnswer()}trueAnswerText(t){const e=t.target.value;this.textValue[this.startTest]=e||null,this.sendUserAnswer(e)}truAnswerNum(t){const e=t.target.value;this.answersIdNum[this.startTest]=e||null,this.sendUserAnswer(e)}sendUserAnswer(t){this.sendAnswerData[this.startTest]=this.createStudentAnswer(+this.questionsAndAnswers[this.startTest].question_id,[t]),this.onAnswer.emit(this.removeEmptyElem(this.sendAnswerData)),this.markStudentAnswer()}createStudentAnswer(t,e){return{question_id:t,answer_ids:e}}removeEmptyElem(t){return t.filter(t=>null!==t)}getTrueAnswer(t,e){if(this.sendAnswerData[e])return this.sendAnswerData[e].answer_ids.includes(t)}markStudentAnswer(){this.isAnswer=this.sendAnswerData.map((t,e)=>t&&!t.answer_ids.includes(null)&&t.answer_ids.length?e:-1)}getShuffledArr(t){return t.reduce((t,e,n)=>{const s=n+Math.floor(Math.random()*(t.length-n));return[t[s],t[n]]=[t[n],t[s]],t},[...t])}getRandomAnswers(t){t.forEach(t=>{t.answers=this.getShuffledArr(t.answers)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Ib({type:t,selectors:[["app-questions"]],inputs:{questionsAndAnswers:"questionsAndAnswers"},outputs:{onAnswer:"onAnswer"},decls:14,vars:7,consts:[[1,"quiz"],[1,"quiz__button-question"],["class","quiz__number_of_question","mat-raised-button","","color","primary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"quiz__question-container"],[1,"quiz__question-text"],["class","quiz__question-picture",4,"ngIf"],[1,"quiz__answers-block"],["class","type_one answer-attachment",4,"ngIf"],["class","type__two answer-attachment",4,"ngIf"],["class","type_three",4,"ngIf"],["class","type_four",4,"ngIf"],["mat-raised-button","","color","primary",1,"quiz__number_of_question",3,"ngClass","click"],[1,"quiz__question-picture"],["mat-card-image","","alt","question picture",3,"src"],[1,"type_one","answer-attachment"],[4,"ngFor","ngForOf"],[1,"simple-checkbox",3,"checked","id","change"],[1,"answer-text"],[4,"ngIf"],["mat-card-image","","alt","answer picture",3,"src"],[1,"type__two","answer-attachment"],[1,"example-margin",3,"id","checked","change"],[1,"type_three"],["matInput","","type","text",3,"value","change"],[1,"type_four"],["matInput","","type","number",3,"value","change"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Ub(1,"form"),u.Ub(2,"div",1),u.Dc(3,U,2,5,"button",2),u.Tb(),u.Ub(4,"div",3),u.Ub(5,"h2",4),u.Fc(6),u.Tb(),u.Dc(7,D,2,1,"div",5),u.Tb(),u.Ub(8,"div",6),u.Dc(9,E,2,1,"ng-container",7),u.Dc(10,Q,2,1,"ng-container",8),u.Dc(11,N,5,1,"div",9),u.Dc(12,V,5,1,"div",10),u.Tb(),u.Tb(),u.Tb(),u.Pb(13,"mat-divider")),2&t&&(u.Cb(3),u.lc("ngForOf",e.btnCount),u.Cb(3),u.Hc(" ",e.questionsAndAnswers[e.startTest].question_text," "),u.Cb(1),u.lc("ngIf",e.questionsAndAnswers[e.startTest].attachment),u.Cb(2),u.lc("ngIf","1"===e.questionsAndAnswers[e.startTest].type),u.Cb(1),u.lc("ngIf","2"===e.questionsAndAnswers[e.startTest].type),u.Cb(1),u.lc("ngIf","3"===e.questionsAndAnswers[e.startTest].type),u.Cb(1),u.lc("ngIf","4"===e.questionsAndAnswers[e.startTest].type))},directives:[P.x,P.q,P.r,i.j,i.k,T.a,f.b,i.i,v.a,q.e,y.a,M.c,M.g,S.b],styles:[".quiz[_ngcontent-%COMP%]{margin:50px auto}.quiz__button-question[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-bottom:30px}.quiz__button-question[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:7px}.quiz__question-container[_ngcontent-%COMP%]{padding:20px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.quiz__question-container__question-text[_ngcontent-%COMP%]{font-size:27px;font-weight:500}.quiz__question-container[_ngcontent-%COMP%]   .quiz__question-picture[_ngcontent-%COMP%]{display:flex;justify-content:center}.quiz__question-container[_ngcontent-%COMP%]   .quiz__question-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75%}@media screen and (min-width:820px){.quiz__question-container[_ngcontent-%COMP%]   .quiz__question-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}}@media screen and (max-width:400px){.quiz__question-container[_ngcontent-%COMP%]   .quiz__question-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.quiz__answers-block[_ngcontent-%COMP%]{padding:20px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);margin:30px auto}.quiz__answers-block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{width:25px;height:25px;margin:8px}.quiz__answers-block[_ngcontent-%COMP%]   .answer-text[_ngcontent-%COMP%]{vertical-align:middle;margin-left:10px;font-size:18px;font-weight:500}.quiz__answers-block[_ngcontent-%COMP%]   .type_three[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:16px}.quiz[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#e2e2dd!important;color:#000!important}.quiz[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{background-color:#2ba12b!important}mat-divider[_ngcontent-%COMP%]{margin-top:100px}"]}),t})();var H=n("668k");function $(t,e){if(1&t){const t=u.Vb();u.Ub(0,"section",2),u.Ub(1,"div",3),u.Ub(2,"div",4),u.Ub(3,"app-timer",5),u.cc("onCheck",function(e){return u.vc(t),u.gc().finishTest(e)}),u.Tb(),u.Tb(),u.Ub(4,"div",6),u.Ub(5,"app-questions",7),u.cc("onAnswer",function(e){return u.vc(t),u.gc().studentAnswer(e)}),u.Tb(),u.Tb(),u.Tb(),u.Tb()}if(2&t){const t=u.gc();u.Cb(3),u.lc("test",t.currentTest),u.Cb(2),u.lc("questionsAndAnswers",t.testQuestionsAndAnswers)}}function G(t,e){1&t&&u.Pb(0,"app-loader")}let J=(()=>{class t{constructor(t,e,n,s){this.router=t,this.testPlayerService=e,this.modalService=n,this.alertService=s,this.loading=!1,this.testQuestionsAndAnswers=[],this.studentAnswers=[]}onReloadHandler(t){t.returnValue=!0}ngOnInit(){this.loading=!0,this.initCurrentTest()}initCurrentTest(){this.playerSubscription=this.testPlayerService.testPlayerGetData().subscribe(t=>{"Empty slot"===t.response?(this.alertService.warning(Object(a.g)("emptySlot")),this.navigateTo("profile")):this.startTestPlayer(t)},t=>{this.alertService.error(Object(a.h)("get"))})}startTestPlayer(t){t.id||t.currentTest||+t.id==+t.currentTest.test_id?(this.currentTest=t.currentTest,this.getTestQA(+t.currentTest.test_id)):(this.resetSession(!1),this.navigateTo("profile"),localStorage.setItem("isMatch","notMatch"))}getTestQA(t){this.testPlayerService.getAllQuestionsDataForTest(+t).subscribe(t=>{this.testQuestionsAndAnswers=t,this.loading=!1},t=>{this.loading=!1,this.getTestQAErrorHandler(t),this.navigateTo("profile")})}getTestQAErrorHandler(t){switch(t.error.response){case Object(a.g)("withoutMakingQuiz",!0):this.alertService.error(Object(a.g)("withoutMakingQuiz",!1));break;case Object(a.g)("enoughNumber",!0):this.alertService.error(Object(a.g)("enoughNumber",!1));break;default:this.alertService.error(Object(a.g)("default"))}}finishTest(t){t.finish&&!t.time?this.modalService.openModal(o.a,{data:{icon:"cancel",message:Object(a.g)("sureFinish",!1,this.currentTest.test_name)}},t=>{t?this.resetSession(!0):t||this.alertService.message(Object(a.e)("cancel"))}):!t.finish&&t.time&&this.checkTest()}studentAnswer(t){this.studentAnswers=t,sessionStorage.setItem("test_progress",JSON.stringify(t))}checkTest(){this.playerSubscription=this.testPlayerService.checkDoneTest(this.studentAnswers).subscribe(t=>{this.navigateTo("results",t)},t=>{this.alertService.error(Object(a.g)("checkError")),this.navigateTo("profile")})}navigateTo(t,e){"results"===t?this.router.navigate(["/student/test-player/results"],{state:{result:e,countOfQuestions:this.testQuestionsAndAnswers.length,testName:this.currentTest.test_name,subjectName:this.currentTest.subjectname}}):"profile"===t&&this.router.navigate(["/student/profile"])}resetSession(t){this.playerSubscription=this.testPlayerService.testPlayerResetSession().subscribe(e=>{e&&t&&(this.alertService.message(Object(a.g)("finish",!1,"",!1)),this.checkTest())},t=>{this.alertService.error(Object(a.h)("reset"))})}ngOnDestroy(){this.playerSubscription&&this.playerSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(s.b),u.Ob(h.a),u.Ob(l.a),u.Ob(b.a))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-test-player"]],hostBindings:function(t,e){1&t&&u.cc("beforeunload",function(t){return e.onReloadHandler(t)},!1,u.uc)},decls:3,vars:2,consts:[["class","test-player",4,"ngIf","ngIfElse"],["loader",""],[1,"test-player"],[1,"test-player__container"],[1,"test-player__header"],[3,"test","onCheck"],[1,"test-player__content"],[3,"questionsAndAnswers","onAnswer"]],template:function(t,e){if(1&t&&(u.Dc(0,$,6,2,"section",0),u.Dc(1,G,1,0,"ng-template",null,1,u.Ec)),2&t){const t=u.sc(2);u.lc("ngIf",!e.loading)("ngIfElse",t)}},directives:[i.k,x,R,H.a],styles:[".test-player[_ngcontent-%COMP%]{margin:20px auto}.test-player__container[_ngcontent-%COMP%]{max-width:1750px;padding:0 15px;margin:0 auto}"]}),t})(),K=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)},imports:[[i.c,r.a,c.b,s.f.forChild([{path:"",component:J}])]]}),t})()}}]);