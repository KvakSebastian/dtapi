(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Lkvv:function(t,e,i){"use strict";i.r(e),i.d(e,"TestDetailesModule",function(){return $});var a=i("tyNb"),s=i("ofXK"),o=i("UKGz"),n=i("M9IT"),c=i("+0xr"),r=i("Dh3D"),l=i("3Pt+"),d=i("0IaG"),b=i("fXoL"),h=i("kmnG"),u=i("d3UM"),m=i("qFsG"),f=i("bTqV"),p=i("FKr1");function g(t,e){if(1&t&&(b.Ub(0,"mat-option",11),b.Fc(1),b.Tb()),2&t){const t=e.$implicit;b.lc("value",t),b.Cb(1),b.Hc(" ",t," ")}}function v(t,e){1&t&&(b.Ub(0,"mat-error"),b.Fc(1," \u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 \u043f\u0443\u0441\u0442\u0438\u043c "),b.Tb())}function T(t,e){1&t&&(b.Ub(0,"mat-error"),b.Fc(1," \u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 \u043f\u0443\u0441\u0442\u0438\u043c "),b.Tb())}function S(t,e){1&t&&(b.Ub(0,"mat-error"),b.Fc(1," \u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 \u043f\u0443\u0441\u0442\u0438\u043c "),b.Tb())}let D=(()=>{class t{constructor(t,e,i){this.formBuilder=t,this.dialogRef=e,this.data=i,this.newLevels=[]}ngOnInit(){this.data.level&&this.newLevels.push(this.data.level);for(let t=1;t<=20;t++)this.data.levels.includes(t)||this.newLevels.push(t);this.form=this.formBuilder.group({level:[this.data.level?this.data.level:"",[l.w.required]],tasks:[this.data.tasks?this.data.tasks:"",[l.w.required]],rate:[this.data.rate?this.data.rate:"",[l.w.required]]})}sendTest(){this.dialogRef.close(this.form.value)}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(l.e),b.Ob(d.g),b.Ob(d.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-test-details-dialog"]],decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-content",""],[1,"example-full-width"],["formControlName","level"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","placeholder","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0437\u0430\u0432\u0434\u0430\u043d\u044c","formControlName","tasks"],["matInput","","type","number","formControlName","rate","required",""],["mat-dialog-actions","",1,"toolbar"],["mat-raised-button","","mat-dialog-close",""],["mat-button","","type","submit",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(b.Ub(0,"form",0),b.cc("ngSubmit",function(){return e.sendTest()}),b.Ub(1,"div",1),b.Ub(2,"mat-form-field",2),b.Ub(3,"mat-label"),b.Fc(4,"\u0420\u0456\u0432\u0435\u043d\u044c"),b.Tb(),b.Ub(5,"mat-select",3),b.Dc(6,g,2,2,"mat-option",4),b.Tb(),b.Dc(7,v,2,0,"mat-error",5),b.Tb(),b.Ub(8,"mat-form-field",2),b.Pb(9,"input",6),b.Dc(10,T,2,0,"mat-error",5),b.Tb(),b.Ub(11,"mat-form-field",2),b.Ub(12,"mat-label"),b.Fc(13,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0431\u0430\u043b\u0456\u0432"),b.Tb(),b.Pb(14,"input",7),b.Dc(15,S,2,0,"mat-error",5),b.Tb(),b.Tb(),b.Ub(16,"div",8),b.Ub(17,"button",9),b.Fc(18,"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"),b.Tb(),b.Ub(19,"button",10),b.Fc(20," \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 "),b.Tb(),b.Tb(),b.Tb()),2&t&&(b.lc("formGroup",e.form),b.Cb(6),b.lc("ngForOf",e.newLevels),b.Cb(1),b.lc("ngIf",e.form.get("level").invalid&&e.form.get("level").touched),b.Cb(3),b.lc("ngIf",e.form.get("tasks").invalid&&e.form.get("tasks").touched),b.Cb(5),b.lc("ngIf",e.form.get("rate").invalid&&e.form.get("rate").touched),b.Cb(4),b.lc("disabled",e.form.invalid))},directives:[l.x,l.q,l.i,d.e,h.c,h.g,u.a,l.p,l.g,s.j,s.k,m.b,l.c,l.s,l.v,d.c,f.b,d.d,p.m,h.b],styles:[""]}),t})();var w=i("L0I5"),C=i("13+f"),U=i("JK/P"),y=i("NFeN"),F=i("Qu3c");const k=["table"];function O(t,e){1&t&&(b.Ub(0,"th",23),b.Fc(1,"\u2116"),b.Tb())}function _(t,e){if(1&t&&(b.Ub(0,"td",24),b.Fc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Hc(" ",t.id," ")}}function P(t,e){1&t&&(b.Ub(0,"th",23),b.Fc(1,"\u0420\u0456\u0432\u0435\u043d\u044c"),b.Tb())}function R(t,e){if(1&t&&(b.Ub(0,"td",24),b.Fc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Hc(" ",t.level," ")}}function M(t,e){1&t&&(b.Ub(0,"th",23),b.Fc(1," \u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0437\u0430\u0432\u0434\u0430\u043d\u044c "),b.Tb())}function x(t,e){if(1&t&&(b.Ub(0,"td",24),b.Fc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Gc(t.tasks)}}function I(t,e){1&t&&(b.Ub(0,"th",23),b.Fc(1," \u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0431\u0430\u043b\u0456\u0432 "),b.Tb())}function B(t,e){if(1&t&&(b.Ub(0,"td",24),b.Fc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Hc(" ",t.rate," ")}}function L(t,e){1&t&&(b.Ub(0,"th",23),b.Fc(1,"\u0414\u0456\u0457"),b.Tb())}function j(t,e){if(1&t){const t=b.Vb();b.Ub(0,"td",24),b.Ub(1,"button",25),b.cc("click",function(){b.vc(t);const i=e.$implicit;return b.gc().openEditDialog(i)}),b.Ub(2,"mat-icon",26),b.Fc(3," edit "),b.Tb(),b.Tb(),b.Ub(4,"button",25),b.cc("click",function(){b.vc(t);const i=e.$implicit;return b.gc().removeTest(i)}),b.Ub(5,"mat-icon",27),b.Fc(6," delete "),b.Tb(),b.Tb(),b.Tb()}}function z(t,e){1&t&&b.Pb(0,"tr",28)}function q(t,e){1&t&&b.Pb(0,"tr",29)}function G(t,e){if(1&t&&(b.Ub(0,"tr",30),b.Ub(1,"td",31),b.Fc(2),b.Tb(),b.Tb()),2&t){b.gc();const t=b.sc(15);b.Cb(2),b.Hc(' \u041d\u0456\u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u0430 \u0437\u0430\u0434\u0430\u043d\u0438\u043c \u0444\u0456\u043b\u044c\u0442\u0440\u043e\u043c "',t.value,'" ')}}const H=function(){return[5,10,25,100]},N=[{path:"",component:(()=>{class t{constructor(t,e,i,a){this.testService=t,this.modalService=e,this.route=i,this.dialog=a,this.tests=[],this.displayedColumns=["id","level","tasks","rate","actions"],this.dataSource=new c.l}ngOnInit(){this.route.queryParams.subscribe(t=>{this.test_id=t.test_id}),this.getTestDetails(this.test_id)}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel="\u0420\u044f\u0434\u043a\u0456\u0432 \u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u0456",this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getTestDetails(t){this.testDetailesSubscription=this.testService.getTestDetailes("getTestDetailsByTest",t).subscribe(t=>{t[0]?(this.tests=t,this.dataSource.data=this.tests,this.levels=this.dataSource.data.map(t=>Number(t.level)),this.getTestRate(this.test_id),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.modalService.showSnackBar("\u0414\u0435\u0442\u0430\u043b\u0456 \u0442\u0435\u0441\u0442\u0456\u0432 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e")):this.levels=[]},t=>{this.modalService.showSnackBar("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u0456 \u0434\u0435\u0442\u0430\u043b\u0435\u0439 \u0442\u0435\u0441\u0442\u0443")})}getTestRate(t){this.testDetailesSubscription=this.testService.getTestDetailes("getTestRate",t).subscribe(t=>{this.testRate=t.testRate},t=>{this.testRate="0",this.modalService.showSnackBar("\u0414\u0430\u043d\u0456 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456")})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openAddDialog(){this.dialog.open(D,{width:"600px",data:{levels:this.levels}}).afterClosed().subscribe(t=>{t&&this.addTest(t)})}openEditDialog(t){this.dialog.open(D,{width:"600px",data:{rate:t.rate,level:t.level,tasks:t.tasks,levels:this.levels}}).afterClosed().subscribe(e=>{e&&this.editTest(e,t.test_id,t.id)})}addTest(t){const e=Object.assign({test_id:this.test_id},t);this.testDetailesSubscription=this.testService.createEntity("testDetail",e).subscribe(t=>{this.dataSource.data=this.dataSource.data.concat(t),this.getTestRate(this.test_id),this.dataSource.paginator.lastPage(),this.dataSource.paginator=this.paginator,this.modalService.showSnackBar("\u0414\u0435\u0442\u0430\u043b\u0456 \u0442\u0435\u0441\u0442\u0456\u0432 \u0434\u043e\u0434\u0430\u043d\u043e")})}editTest(t,e,i){const a=Object.assign({test_id:e},t);this.testDetailesSubscription=this.testService.updateEntity("TestDetail",a,i).subscribe(t=>{this.getTestRate(this.test_id);const e=this.dataSource.data.map(e=>e.id===i?Object.assign({},t[0]):e);this.dataSource.data=e,this.modalService.showSnackBar("\u0414\u0435\u0442\u0430\u043b\u0456 \u0442\u0435\u0441\u0442\u0443 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e")})}removeTimeTable(t){this.dialog.open(w.a,{width:"300px",data:{group_name:t.test_id}}).afterClosed().subscribe(e=>{e?this.removeTest(t):(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}removeTest(t){this.testDetailesSubscription=this.testService.deleteEntity("testDetail",t.id).subscribe(()=>{this.dataSource.data=this.dataSource.data.filter(e=>e.id!==t.id),this.getTestRate(this.test_id),this.modalService.showSnackBar("\u0414\u0435\u0442\u0430\u043b\u0456 \u0442\u0435\u0441\u0442\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")},t=>this.modalService.showSnackBar("\u0422\u0435\u0441\u0442 \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))}ngOnDestroy(){this.testDetailesSubscription&&this.testDetailesSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(C.a),b.Ob(U.a),b.Ob(a.a),b.Ob(d.b))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-test-detailes"]],viewQuery:function(t,e){if(1&t&&(b.zc(k,!0),b.zc(n.a,!0),b.zc(r.a,!0)),2&t){let t;b.rc(t=b.dc())&&(e.table=t.first),b.rc(t=b.dc())&&(e.paginator=t.first),b.rc(t=b.dc())&&(e.sort=t.first)}},decls:42,vars:6,consts:[[1,"entity-header"],[1,"mat-h1","entity-title"],[1,"entity-title-icon"],["mat-raised-button","","color","primary",3,"click"],[1,"entity-search-label"],[1,"entity-search-icon"],["matInput","","placeholder","\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0442\u0435\u0441\u0442",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortStart","desc","e","",3,"dataSource"],["tabl",""],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","level"],["matColumnDef","tasks"],["matColumnDef","rate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"showRate"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-flat-button","","color","primary",1,"operation-button",3,"click"],["aria-hidden","false","aria-label","edit","matTooltip","\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f"],["aria-hidden","false","aria-label","delete","matTooltip","\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f\n                    "],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"h1",1),b.Ub(2,"mat-icon",2),b.Fc(3,"details "),b.Tb(),b.Fc(4," \u0414\u0435\u0442\u0430\u043b\u0456 \u0442\u0435\u0441\u0442\u0443 "),b.Tb(),b.Ub(5,"button",3),b.cc("click",function(){return e.openAddDialog()}),b.Ub(6,"mat-icon"),b.Fc(7,"add_circle"),b.Tb(),b.Fc(8," \u0414\u043e\u0434\u0430\u0442\u0438 \u0434\u0435\u0442\u0430\u043b\u0456 "),b.Tb(),b.Tb(),b.Ub(9,"mat-form-field"),b.Ub(10,"mat-label",4),b.Ub(11,"mat-icon",5),b.Fc(12,"person_search"),b.Tb(),b.Fc(13," \u041f\u043e\u0448\u0443\u043a "),b.Tb(),b.Ub(14,"input",6,7),b.cc("keyup",function(t){return e.applyFilter(t)}),b.Tb(),b.Tb(),b.Ub(16,"div",8),b.Ub(17,"table",9,10),b.Sb(19,11),b.Dc(20,O,2,0,"th",12),b.Dc(21,_,2,1,"td",13),b.Rb(),b.Sb(22,14),b.Dc(23,P,2,0,"th",12),b.Dc(24,R,2,1,"td",13),b.Rb(),b.Sb(25,15),b.Dc(26,M,2,0,"th",12),b.Dc(27,x,2,1,"td",13),b.Rb(),b.Sb(28,16),b.Dc(29,I,2,0,"th",12),b.Dc(30,B,2,1,"td",13),b.Rb(),b.Sb(31,17),b.Dc(32,L,2,0,"th",12),b.Dc(33,j,7,0,"td",13),b.Rb(),b.Dc(34,z,1,0,"tr",18),b.Dc(35,q,1,0,"tr",19),b.Dc(36,G,3,1,"tr",20),b.Tb(),b.Ub(37,"div",21),b.Fc(38," \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0431\u0430\u043b\u0456\u0432: "),b.Ub(39,"span"),b.Fc(40),b.Tb(),b.Tb(),b.Pb(41,"mat-paginator",22),b.Tb()),2&t&&(b.Cb(17),b.lc("dataSource",e.dataSource),b.Cb(17),b.lc("matHeaderRowDef",e.displayedColumns),b.Cb(1),b.lc("matRowDefColumns",e.displayedColumns),b.Cb(5),b.Gc(e.testRate),b.Cb(1),b.lc("pageSizeOptions",b.oc(5,H)))},directives:[y.a,f.b,h.c,h.g,m.b,c.k,r.a,c.c,c.e,c.b,c.g,c.j,c.h,n.a,c.d,r.b,c.a,F.a,c.f,c.i],styles:["table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]:nth-child(3), th[_ngcontent-%COMP%]:nth-child(3){width:25%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:20%}.paginator[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.mat-icon[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.entity-title[_ngcontent-%COMP%]{display:flex;align-items:center}.entity-title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:auto;height:auto}.operation-button[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;justify-content:center;width:2.2rem;height:2.2rem;min-width:30px;margin:0 .5rem 0 0;padding:0 .4rem}.operation-button[_ngcontent-%COMP%]:last-child{margin:0}.operation-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;font-size:1.2rem}.showRate[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin-top:2px;display:block;padding:12px 0 12px 25px;border-bottom:.5px solid #d3d3d3;background:#fff}"]}),t})()}];let $=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[s.c,o.a,a.f.forChild(N)]]}),t})()}}]);